<!--
File: https://github.com/A-Level-Personal-Code-Collab/PirateGame/templates/online_game.html
Project: https://github.com/A-Level-Personal-Code-Collab/PirateGame/templates
Created Date: Sunday, July 11th 2021, 5:31:49 pm
Description: The main game play screen
Author: Adam O'Neill
Copyright (c) 2021 Adam O'Neill
-----
Last Modified: Fri Oct 29 2021
Modified By: Will Hall
-----
HISTORY:
Date      	By	Comments
----------	---	---------------------------------------------------------
2021-09-29	WH	Added animation image template
2021-09-25	WH	Cash boxes now lists
2021-09-20	WH	Changed retaliations 'collum' to little pop-out tab
2021-09-19	WH	Added box for retaliatory implements
2021-09-02	WH	Added target selector popup
2021-09-02	WH	Added action waiting popup
2021-09-02	WH	Added declare button to Header
2021-08-28	WH	Moved actual log information into sepearte p tag for ease of JS
2021-08-28	WH	Added means to link with host settings file
2021-08-24	WH	Added cash, bank and log boxes to game screen
2021-08-23	WH	Added CSS and added link for grid file
-->

{% extends "base.html" %}

{% block title %}Playing Pirate Game{% endblock %}
{% block head %}
<link rel="stylesheet" href="../static/css/online_game.css">
<link rel="stylesheet" href="../static/css/game_header.css">
<link rel="stylesheet" href="../static/css/popup.css">
<link href="https://fonts.googleapis.com/css2?family=Frijole&display=swap" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet"> 
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
<script src="../static/javascript/online_game.js" defer></script>

<script>
    const MY_SID = parseInt("{{ mySID }}");
</script>

{% block headXtra %}
{% endblock %}

{% endblock %}

{% block body%}
    <div class="gameSubheader" id="div_gameHeader">
        <h1 class="gameHeaderTitle">{{ hostNick }}'s Pirate Game</h1>
        <div id="div_headerControls">
            <input type="button" value="🖐 - Declare Action" id="ipt_declare" class="actionButton disabled" disabled>
            {% block hostHeader %}
            {% endblock %}
        </div>
    </div>
    <div id="div_gameDataGroup">
        {{ grid }}
        <div class="gameContainer">
            <div id="div_cashBox">
                <h5>Your Cash</h5>
                <list class="moneyList" id="list_cashText"></list>
            </div>
            <hr>
            <div id="div_bankBox">
                <h5>Your bank</h5>
                <list class="moneyList" id="list_bankText"></list>
            </div>
        </div>
        <div class="gameContainer">
            {% block hostControls %}
            {% endblock %}
            <div id="gameLog">
                <h5>Game log</h5>
                <p id="p_logText"></p>
            </div>
        </div>
        <div class="retaliationSleeve">
            <h5 class="retaliationSleeve">Retaliations</h5>
            <div id="retaliation_box"></div>
        </div>
    </div>
    <div style="display:none;" class="popupHousing" id="div_waitingPopup">
        <div class="popupbox actionPopUp">
            <div class="popupHeader">
                Raise your cutlass, there be drama on deck!
            </div>
            <div class="popupBody">
               <h3 id="h3_perpetrator_text">__perpetrator__</h3> is attempting to <h3 id="h3_action_emphasis_text">💰 steal from 💰</h3><h3 id="h3_target_text"></h3><div id="div_loadingdots"><div class="loadingdot"></div><div class="loadingdot"></div><div class="loadingdot"></div><div class="loadingdot"></div><div class="loadingdot"></div></div> 
               <div id="div_retaliation_controls"></div>
            </div>
            <div class="popupFooter">
                Wait for your crewmates to pick their target
            </div>
        </div>
    </div>
    <div style="display:none;" class="popupHousing" id="div_targetPickerPopup">
        <div class="popupbox actionPopUp">
            <div class="popupHeader">
                Take a shot of rum and ready yourself for mutany
            </div>
            <div class="popupBody">
                Choose a target to...
               <h3 id="h3_targetPickerAction">⚔ KILL ⚔</h3>
               <select class="popupDropdown" id="sel_target"></select>
            </div>
            <div class="popupFooter">
                <input type="button" value="Choose" class="popupButton" id="ipt_chooseTarget">
            </div>
        </div>
    </div>
    <img style="display:none" id="retal-animation" class="itmShield-animation" src="../static/img/shield.png" alt="retaliation">
{% endblock %}

